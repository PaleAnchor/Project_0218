# Project_0218

## 方向更新：开发一个“电脑使用时间统计 App”

如果你想从 0 到 1 做一个统计电脑使用时间的应用，建议按下面的顺序推进。

### 1) 明确 MVP（第一版只做最小可用）
先聚焦 3 个核心功能：
- 记录活跃使用时长（按天/周汇总）
- 记录前台应用使用时长（如 Chrome、VSCode、游戏）
- 本地可视化展示（今日总时长 + Top 应用）

把下面这些留到后续版本：
- 云同步
- 账号系统
- 跨设备统计
- AI 建议与效率评分

### 2) 技术路线建议（桌面优先）
推荐做法：
- **桌面端框架**：Tauri（前端可用 React/Vue）
- **系统能力层**：Rust（采集前台窗口、空闲状态）
- **本地存储**：SQLite
- **图表**：ECharts/Chart.js

为什么这样选：
- 性能和包体通常比 Electron 更轻
- 跨平台能力较好（Windows/macOS/Linux）
- 更适合做系统级采集

### 3) 数据模型（先简单再扩展）
建议最小表结构：
- `sessions`
  - `id`
  - `app_name`
  - `window_title`
  - `start_time`
  - `end_time`
  - `duration_sec`
- `daily_stats`
  - `date`
  - `total_active_sec`
  - `idle_sec`

采集策略：
- 每 1~5 秒轮询一次前台窗口
- 如果应用变化则结束上一段 session，开启新 session
- 当系统空闲超过阈值（如 60 秒）计入 idle

### 4) 开发里程碑（2~4 周）
- **第 1 周**：完成本地采集与 SQLite 落库
- **第 2 周**：完成日报视图、应用排行
- **第 3 周**：增加设置项（空闲阈值、开机自启、排除应用）
- **第 4 周**：打包发布与基础隐私说明

### 5) 隐私与合规（非常关键）
你会接触用户行为数据，务必做到：
- 默认仅本地存储，不上传
- 明确告知采集项（应用名、时长、是否采集窗口标题）
- 提供“一键清空本地数据”
- 对“窗口标题采集”做可选开关（默认关闭更稳妥）

### 6) 先做 PoC 的最小任务清单
1. 创建 Tauri 项目
2. 写一个后台采集服务（每 2 秒取前台应用）
3. 将 session 写入 SQLite
4. 前端做“今日总时长 + Top5 应用”页面
5. 连续跑 2 天验证数据准确性

### 7) 常见难点与规避
- **难点：系统权限**（尤其 macOS）
  - 解决：先列出权限清单并在首次启动引导授权
- **难点：数据碎片化**（频繁切换窗口）
  - 解决：引入最小时长阈值（如 <3 秒可合并）
- **难点：高占用**
  - 解决：轮询间隔自适应（活跃时短，空闲时长）

---

如果你愿意，我下一步可以直接给你：
- 一个可运行的 **Tauri + SQLite 项目骨架**
- 采集服务的伪代码与表结构 SQL
- 首版 UI 页面结构（仪表盘 + 明细）
